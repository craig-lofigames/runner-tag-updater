name: UpdateVersionNumberFromTag.yml

on:
  push:
    branches: [ "main" ]
    # Pattern matched against refs/tags
    tags:        
      - 'v*'          # Push events to every tag not containing /
      # A workflow run is made up of one or more jobs that can run sequentially or in parallel
    
    # Allows you to run this workflow manually from the Actions tab
    workflow_dispatch:

jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-20.04
    steps:    
      - name: checkout repo content
        uses: actions/checkout@v2 # checkout the repository content to github runner
        with:
            ref: main
      - name: Set env
        run: echo "RELEASE_VERSION=${GITHUB_REF#refs/*/}" >> $GITHUB_ENV
      - name: Test
        run: |
          echo $RELEASE_VERSION
          echo ${{ env.RELEASE_VERSION }}
